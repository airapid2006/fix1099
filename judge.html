INPUT: payee_type, reason, payment_method

SET result = {
  need_1099: false,
  form_type: "none",
  box: "Box 1",
  confidence: "low",
  required_next_docs: [],
  disclaimer_key: "disclaimer.default"
}

# Rule priority: platform > third_party method > reason

IF payee_type == "platform" OR payment_method == "third_party":
    result.need_1099 = false
    result.form_type = "none"
    result.box = "N/A"
    result.confidence = "high"
    result.required_next_docs = ["recipient_identity_basic"]
    result.disclaimer_key = "disclaimer.platform_1099k"
    RETURN result

IF reason == "rent":
    result.need_1099 = true
    result.form_type = "1099-MISC"
    result.box = "Box 1"
    result.confidence = "high"
    result.required_next_docs = ["w9_or_tax_id", "recipient_name", "recipient_address"]
    result.disclaimer_key = "disclaimer.information_return"
    RETURN result

IF reason == "service":
    result.need_1099 = true
    result.form_type = "1099-NEC"
    result.box = "Box 1"
    result.confidence = "high"
    result.required_next_docs = ["w9_or_tax_id", "recipient_name", "recipient_address"]
    result.disclaimer_key = "disclaimer.information_return"
    RETURN result

IF reason == "award":
    result.need_1099 = true
    result.form_type = "1099-MISC"
    result.box = "Box 3"
    result.confidence = "medium"
    result.required_next_docs = ["w9_or_tax_id", "recipient_name", "recipient_address"]
    result.disclaimer_key = "disclaimer.information_return"
    RETURN result

# other / unknown
result.need_1099 = true
result.form_type = "1099-NEC"
result.box = "Box 1"
result.confidence = "low"
result.required_next_docs = ["w9_or_tax_id", "recipient_name", "recipient_address"]
result.disclaimer_key = "disclaimer.low_confidence"
RETURN result
